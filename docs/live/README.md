## 1.基本描述

&emsp;&emsp;保利威直播源自公司多年视频技术沉淀，基于专业的跨平台视频编解码技术和大规模视频内容分发网络，提供稳定流畅、低延时、高并发的实时音视频服务。

&emsp;&emsp;**保利威直播Java SDK**让您不用复杂编程即可轻松接入保利威直播视频云服务，实现云直播相关视频服务。

&emsp;&emsp;**保利威直播Java SDK**依托保利威直播API实现，对其进行包装和优化。解放B端用户的共性工作。将API调用逻辑和异常处理进行了封装优化，B端用户只需将请求参数封装后，交给**保利威直播Java SDK**处理即可，**保利威直播Java SDK**处理完成后返回结果，B端依据返回数据继续完成B端业务逻辑。现阶段**保利威直播Java SDK**涵盖了频道管理、观看管理、直播互动、聊天室、播放器 等 绝大部分经常使用的API操作。

&emsp;&emsp;如果您在使用**保利威直播Java SDK**的过程中遇到任何问题，直接使用<a href="javascript:void(0);" onclick="$('#zhichiBtnBox').click()">在线客服</a>找到售后技术支持提问。请将问题的运行环境、操作步骤、错误反馈信息、联系方式同步提交，便于问题的快速定位和解决。

## 2.SDK整体设计

<img src="../img/image-20201023100552660.png" alt="image-20201023100552660" style="zoom: 80%;" />

1.B端管理员通过SDK创建频道基本信息，比如频道名称、频道观看密码、频道直播场景等基本属性；

2.B端管理员通过SDK对频道进行基本的信息设置，比如观看条件设置、讲师基本信息设置、课程基本信息设置、分享文案设置等设置；

3.B端讲师通过网页、直播助手、第三方推流工具登录直播频道，开始直播；

4.C端观众通过推广分享页面链接或者二维码登录直播频道，观看直播内容；

5.B端待直播结束后，进行回放、转存设置，统计分析数据获取，完成直播业务闭环； 

![image-20201023101248786](../img/image-20201023101248786.png)

## 3.SDK详细设计

<img src="../img/image-20201023105514125.png" alt="image-20201023105514125" style="zoom:80%;" />

## 4.SDK业务逻辑分析

&emsp;* 前置条件：SDK全局初始化：在调用SDK前必须配置全局参数，可配置参数包括账户信息（appId、userId、appSecret) 和HTTP链接池参数（timeout、maxClientNum)，具体请见 [初始化](/quick_start?id=_2初始化系统)

&emsp;* SDK全局参数注入：SDK将全局配置的参数，注入到请求对象中；

&emsp;* 签名生成：SDK采用MD5算法签名规则，生成签名；

&emsp;* 参数合法性校验：SDK采用自定义参数校验工具对输入参数进行校验，<font color=#FF0000 >如有参数不合格，将抛出PloyvSdkException异常，exception的message包括具体校验不通过的字段信息，此异常是运行时异常，必须捕获处理相关业务逻辑；</font>

&emsp;* 发送HTTP请求，获取返回数据：SDK在初始化阶段初始化了一个HTTP链接池，所有SDK请求都是通过该链接池来发送请求；

&emsp;* 解析返回数据：解析返回数据，如SDK调用正常成功，将封装响应对象，正常返回，<font color=#FF0000 >如服务器返回错误信息，SDK将将抛出PloyvSdkException异常，exception的message包括具体服务器执行错误信息，此异常是运行时异常，必须捕获处理相关业务逻辑；</font>

## 5.调用流程模板

&emsp;&emsp;上述业务流程图解析到代码层次如下，所有对**保利威直播Java SDK**的调用都可以参考如下调用模板（**全局初始化只需要全局调用一次**）。

![image-20201104100014039](../img/image-20201104100014039.png)









